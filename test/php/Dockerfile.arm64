#--------------------------------------
# Image: base
#--------------------------------------
ARG BASE_IMAGE=containerbase/base

FROM ${BASE_IMAGE} as base

RUN touch /.dummy

ARG APT_HTTP_PROXY
ARG CONTAINERBASE_DEBUG
ARG GITHUB_TOKEN

RUN uname -p | tee | grep aarch64

#--------------------------------------
# Image: php
#--------------------------------------
FROM base as test-php

# renovate: datasource=github-releases packageName=containerbase/php-prebuild
RUN install-tool php 8.3.2
#--------------------------------------
# Image: composer
#--------------------------------------
FROM test-php as test-composer

# renovate: datasource=github-releases packageName=composer/composer
RUN install-tool composer 2.6.6

#--------------------------------------
# Image: final
#--------------------------------------
FROM base

COPY --from=test-php /.dummy /.dummy
COPY --from=test-composer /.dummy /.dummy
